import{r as d,j as e,O as y}from"./index-B0WoY9Z1.js";import{s as C,P as x,u as E,a as g,c as I,b as m,B as N,d as k,e as R,f as P,g as _,h as M,i as z,S as O}from"./useGetSpells-ztMhmTpK.js";function D(){return C.useSyncExternalStore(F,()=>!0,()=>!1)}function F(){return()=>{}}var h="Avatar",[B]=I(h),[H,b]=B(h),j=d.forwardRef((t,a)=>{const{__scopeAvatar:s,...i}=t,[o,r]=d.useState("idle");return e.jsx(H,{scope:s,imageLoadingStatus:o,onImageLoadingStatusChange:r,children:e.jsx(x.span,{...i,ref:a})})});j.displayName=h;var A="AvatarImage",w=d.forwardRef((t,a)=>{const{__scopeAvatar:s,src:i,onLoadingStatusChange:o=()=>{},...r}=t,c=b(A,s),l=$(i,r),u=E(f=>{o(f),c.onImageLoadingStatusChange(f)});return g(()=>{l!=="idle"&&u(l)},[l,u]),l==="loaded"?e.jsx(x.img,{...r,ref:a,src:i}):null});w.displayName=A;var L="AvatarFallback",T=d.forwardRef((t,a)=>{const{__scopeAvatar:s,delayMs:i,...o}=t,r=b(L,s),[c,l]=d.useState(i===void 0);return d.useEffect(()=>{if(i!==void 0){const u=window.setTimeout(()=>l(!0),i);return()=>window.clearTimeout(u)}},[i]),c&&r.imageLoadingStatus!=="loaded"?e.jsx(x.span,{...o,ref:a}):null});T.displayName=L;function S(t,a){return t?a?(t.src!==a&&(t.src=a),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function $(t,{referrerPolicy:a,crossOrigin:s}){const i=D(),o=d.useRef(null),r=i?(o.current||(o.current=new window.Image),o.current):null,[c,l]=d.useState(()=>S(r,t));return g(()=>{l(S(r,t))},[r,t]),g(()=>{const u=n=>()=>{l(n)};if(!r)return;const f=u("loaded"),v=u("error");return r.addEventListener("load",f),r.addEventListener("error",v),a&&(r.referrerPolicy=a),typeof s=="string"&&(r.crossOrigin=s),()=>{r.removeEventListener("load",f),r.removeEventListener("error",v)}},[r,s,a]),c}var q=j,G=w;function K({className:t,size:a="default",...s}){return e.jsx(q,{"data-slot":"avatar","data-size":a,className:m("group/avatar relative flex size-8 shrink-0 overflow-hidden rounded-full select-none data-[size=lg]:size-10 data-[size=sm]:size-6",t),...s})}function Q({className:t,...a}){return e.jsx(G,{"data-slot":"avatar-image",className:m("aspect-square size-full",t),...a})}function V(){return e.jsx("div",{children:e.jsx(N,{variant:"ghost",children:e.jsx(K,{children:e.jsx(Q,{src:"avatar.png"})})})})}function W({className:t,type:a,...s}){return e.jsx("input",{type:a,"data-slot":"input",className:m("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...s})}function J({...t}){const{className:a,font:s}=t;return e.jsxs("div",{className:m("relative border-y-6 border-foreground dark:border-ring !p-0 flex items-center",a),children:[e.jsx(W,{...t,className:m("rounded-none ring-0 !w-full",s!=="normal"&&"retro",a)}),e.jsx("div",{className:"absolute inset-0 border-x-6 -mx-1.5 border-foreground dark:border-ring pointer-events-none","aria-hidden":"true"})]})}function U(){const[t,a]=d.useState(""),{t:s}=k(),[i,o]=d.useState(!1),{data:r=[]}=R(),{setSelectedSpellIndex:c}=P(),l=d.useMemo(()=>t.length===0?[]:r.filter(n=>n.name.toLowerCase().includes(t.toLowerCase())),[r,t]),u=d.useMemo(()=>l.slice(0,6),[l]),f=i&&u.length>0,v=n=>{c(n),o(!1),a(""),console.log(n)};return e.jsx("div",{className:"max-w-sm w-full",children:e.jsxs(_,{open:f,onOpenChange:o,children:[e.jsx(M,{asChild:!0,children:e.jsx(J,{value:t,placeholder:s("research"),onChange:n=>{const p=n.target.value;a(p),o(p.length>0)},onFocus:()=>{t.length>0&&u.length>0&&o(!0)}})}),e.jsx(z,{onOpenAutoFocus:n=>n.preventDefault(),onInteractOutside:n=>{n.target instanceof Element&&n.target.closest("input")&&n.preventDefault()},children:e.jsx("div",{className:"space-y-1",children:u.map(n=>e.jsx("div",{role:"button",onClick:()=>v(n.url),onKeyDown:p=>p.key==="Enter"&&v(n.url),children:e.jsx("span",{children:n.name})},n.index))})})]})})}function X(){return e.jsxs("div",{className:"border-b border-stone-400 p-4 flex items-center",children:[e.jsx(U,{}),e.jsx("div",{className:"ml-auto",children:e.jsx(V,{})})]})}const ee=()=>e.jsx(O,{children:e.jsxs("div",{children:[e.jsx(X,{}),e.jsx("main",{children:e.jsx(y,{})})]})});export{ee as component};
